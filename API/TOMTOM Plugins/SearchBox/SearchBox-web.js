!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t,n){"use strict";function r(e){var t=!1,n=!0,r=!1,i=void 0;try{for(var o,s=document.styleSheets[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value.href;if(a&&-1!==a.indexOf(e)){t=!0;break}}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}t||console.warn('It seems that you forgot to add "'.concat(e,'" to your page, that is ')+"why some information might not be visible on your map. You can find the missing asset on our Downloads page: https://developer.tomtom.com/maps-sdk-web-js/downloads")}t.a=function(e){var t=!0,n=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){r(o.value)}}catch(e){n=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw i}}}},,function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,l=a||u||Function("return this")(),c=Object.prototype.toString,p=Math.max,f=Math.min,h=function(){return l.Date.now()};function d(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==c.call(e)}(e))return NaN;if(d(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=d(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var a=i.test(e);return a||o.test(e)?s(e.slice(2),a?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,s,a,u,l=0,c=!1,v=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=r,o=i;return r=i=void 0,l=t,s=e.apply(o,n)}function y(e){return l=e,a=setTimeout(w,t),c?g(e):s}function b(e){var n=e-u;return void 0===u||n>=t||n<0||v&&e-l>=o}function w(){var e=h();if(b(e))return O(e);a=setTimeout(w,function(e){var n=t-(e-u);return v?f(n,o-(e-l)):n}(e))}function O(e){return a=void 0,m&&r?g(e):(r=i=void 0,s)}function x(){var e=h(),n=b(e);if(r=arguments,i=this,u=e,n){if(void 0===a)return y(u);if(v)return a=setTimeout(w,t),g(u)}return void 0===a&&(a=setTimeout(w,t)),s}return t=_(t)||0,d(n)&&(c=!!n.leading,o=(v="maxWait"in n)?p(_(n.maxWait)||0,t):o,m="trailing"in n?!!n.trailing:m),x.cancel=function(){void 0!==a&&clearTimeout(a),l=0,r=u=i=a=void 0},x.flush=function(){return void 0===a?s:O(h())},x}}).call(this,n(2))},,,function(e,t){
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
"document"in window.self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||function(e){"use strict";if("Element"in e){var t=e.Element.prototype,n=Object,r=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},i=Array.prototype.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},o=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},s=function(e,t){if(""===t)throw new o("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new o("INVALID_CHARACTER_ERR","String contains an invalid character");return i.call(e,t)},a=function(e){for(var t=r.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,o=n.length;i<o;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},u=a.prototype=[],l=function(){return new a(this)};if(o.prototype=Error.prototype,u.item=function(e){return this[e]||null},u.contains=function(e){return-1!==s(this,e+="")},u.add=function(){var e,t=arguments,n=0,r=t.length,i=!1;do{e=t[n]+"",-1===s(this,e)&&(this.push(e),i=!0)}while(++n<r);i&&this._updateClassName()},u.remove=function(){var e,t,n=arguments,r=0,i=n.length,o=!1;do{for(e=n[r]+"",t=s(this,e);-1!==t;)this.splice(t,1),o=!0,t=s(this,e)}while(++r<i);o&&this._updateClassName()},u.toggle=function(e,t){e+="";var n=this.contains(e),r=n?!0!==t&&"remove":!1!==t&&"add";return r&&this[r](e),!0===t||!1===t?t:!n},u.toString=function(){return this.join(" ")},n.defineProperty){var c={get:l,enumerable:!0,configurable:!0};try{n.defineProperty(t,"classList",c)}catch(e){void 0!==e.number&&-2146823252!==e.number||(c.enumerable=!1,n.defineProperty(t,"classList",c))}}else n.prototype.__defineGetter__&&t.__defineGetter__("classList",l)}}(window.self),function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,r=arguments.length;for(n=0;n<r;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}e=null}())},function(e,t,n){e.exports=n.p+"src/SearchBox/dist/SearchBox.css"},,,function(e,t,n){"use strict";n.r(t);n(6);var r="tomtom.searchbox.resultscleared",i="tomtom.searchbox.resultsfound",o="tomtom.searchbox.resultselected",s="tomtom.searchbox.resultfocused",a="tomtom.searchbox.inputrestored",u=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.origin=t,this.data=n},l=function(e,t){return new u(e,t)},c=40,p=38,f=46,h=13,d=27,_=8,v="FUZZY_SEARCH",m="AUTOCOMPLETE",g="brand",y="category",b='\n    <svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <path d="M10.5,4 C14.0898509,4 17,6.91014913 17,10.5 C17,11.9337106 16.5358211,13.2590065 15.7495478,14.3338028 L19.7071068,18.2928932 C20.0976311,18.6834175 20.0976311,19.3165825 19.7071068,19.7071068 C19.3165825,20.0976311 18.6834175,20.0976311 18.2928932,19.7071068 L14.3338028,15.7495478 C13.2590065,16.5358211 11.9337106,17 10.5,17 C6.91014913,17 4,14.0898509 4,10.5 C4,6.91014913 6.91014913,4 10.5,4 Z M10.5,6 C8.01471863,6 6,8.01471863 6,10.5 C6,12.9852814 8.01471863,15 10.5,15 C12.9852814,15 15,12.9852814 15,10.5 C15,8.01471863 12.9852814,6 10.5,6 Z" id="Shape"></path>\n    </svg>',w='\n    <svg xmlns="http://www.w3.org/2000/svg" width="15" height="13" viewBox="0 0 15 13">\n    <path d="M15.512418,11.5 L19.9637666,7.28870352 C20.1223719,7.13865149 20.1223719,6.89512441 19.9637666,6.74507238 L18.2390424,5.11253903 C18.0795704,4.96248699 17.8221618,4.96248699 17.6635565,5.11253903 L13.2122078,9.3238355 L8.7608592,5.11253903 C8.68545669,5.04120281 8.58145321,5.00020499 8.47398296,5.00020499 C8.36564601,5.00020499 8.26250923,5.04120281 8.18624002,5.11253903 L6.46064906,6.74507238 C6.38437985,6.81722855 6.34191176,6.91480337 6.34191176,7.01729793 C6.34191176,7.11979249 6.38437985,7.21736731 6.46064906,7.28952348 L10.9119977,11.5 L6.46064906,15.7112965 C6.38437985,15.7834526 6.34191176,15.8810275 6.34191176,15.9827021 C6.34191176,16.0851966 6.38437985,16.1827715 6.46064906,16.2549276 L8.18624002,17.887461 C8.26250923,17.9596171 8.36564601,17.999795 8.47398296,17.999795 C8.58145321,17.999795 8.68545669,17.9596171 8.7608592,17.887461 L13.2122078,13.6761645 L17.6635565,17.887461 C17.8221618,18.037513 18.0795704,18.037513 18.2390424,17.887461 L19.9637666,16.2549276 C20.1223719,16.1048756 20.1223719,15.8613485 19.9637666,15.7112965 L15.512418,11.5 Z" transform="translate(-5.544 -5)"/>\n    </svg>';function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),e}var S=function(){function e(t,n,r,i){var o,a,u,c=this;O(this,e),u=function(){c._evented.fire(s,l(null,{result:c._result,text:c._getResultText()}))},(a="focus")in(o=this)?Object.defineProperty(o,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):o[a]=u,this._evented=t,this._options=r,this._result=n,this._type=i,this._createResultElement()}return C(e,[{key:"select",value:function(e){this._evented.fire(o,l(e,{result:this._result,text:this._getResultText()}))}},{key:"getContainer",value:function(){return this._container}},{key:"_createResultElement",value:function(){this._container=document.createElement("div"),this._container.onmousedown=function(e){return e.preventDefault()},this._container.onclick=this.select.bind(this),this._container.className="tt-search-box-result-list";var e=function(e){return'<span class="tt-search-box-result-list-bold">'.concat(e,"</span>")},t=function(e){return'<span class="tt-search-box-result-list-text-content">'.concat(e,"</span>")};switch(this._type){case v:var n=this._getAddress(),r=this._getPoiName(),i=null;n&&r?i="".concat(e(r)," ").concat(n):n&&(i="".concat(e(n))),i&&(this._container.innerHTML="".concat('\n    <svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <path d="M12,4 C15.3068357,4 18,6.61029768 18,9.84615385 C18,11.813391 16.4537597,14.7566138 13.3693459,18.8534202 L13.3693459,18.8534202 L12.7915956,19.6110453 C12.3912752,20.1296516 11.6087248,20.1296516 11.2084044,19.6110453 C7.73934285,15.1169529 6,11.9326175 6,9.84615385 C6,6.61029768 8.69316428,4 12,4 Z M12,6 C9.78398823,6 8,7.72909628 8,9.84615385 C8,11.1589113 9.25046927,13.5982613 11.758095,17.016979 L11.758095,17.016979 L11.999,17.344 L12.4887469,16.6780042 C14.7534108,13.5448791 15.9207088,11.2710802 15.9960961,9.97670688 L15.9960961,9.97670688 L16,9.84615385 C16,7.72909628 14.2160118,6 12,6 Z M12,8 C13.1045695,8 14,8.8954305 14,10 C14,11.1045695 13.1045695,12 12,12 C10.8954305,12 10,11.1045695 10,10 C10,8.8954305 10.8954305,8 12,8 Z" id="Combined-Shape" fill-rule="nonzero"></path>\n    </svg>'," ").concat(t("".concat(i))));break;case m:var o=this._getSuggestionName(),s=this._getSuggestionType();if(o&&s){var a="plaintext"===s?"":" ".concat(this._options.labels.suggestions[s]);this._container.innerHTML="".concat(b," ").concat(t("".concat(e(o)).concat(a)))}}}},{key:"_getSuggestionName",value:function(){return this._result.value?this._result.value:null}},{key:"_getSuggestionType",value:function(){return this._result.type?this._result.type:null}},{key:"_getPoiName",value:function(){return void 0!==this._result.poi&&void 0!==this._result.poi.name?this._result.poi.name:null}},{key:"_getAddress",value:function(){if(void 0!==this._result.address){var e=[];return void 0!==this._result.address.freeformAddress&&e.push(this._result.address.freeformAddress),void 0!==this._result.address.countryCodeISO3&&e.push(this._result.address.countryCodeISO3),e.join(", ")}return null}},{key:"_getResultText",value:function(){switch(this._type){case v:return this._result.poi?this._result.poi.name+", "+this._result.address.freeformAddress:this._result.address.freeformAddress;case m:return this._result.value}return""}}]),e}(),T=function(){function e(t){O(this,e),this._container=document.createElement("div"),this._container.className="tt-search-box-result-list",this._container.innerText=t}return C(e,[{key:"select",value:function(){}},{key:"getContainer",value:function(){return this._container}}]),e}(),I={resultListElement:function(e,t,n,r){return new S(e,t,n,r)},noResultsListElement:function(e){return new T(e)}};function j(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),R(this,"_onKeyDown",(function(e){var t=e.keyCode||e.which;t===c||t===p?i._highlightElement(t):t===h&&i._selectElement(e)})),R(this,"setVisibility",(function(e){var t=e?"remove":"add";i._container.classList[t]("-hidden")})),R(this,"_findAutocompleteResponseSegments",(function(e,t){var n={};for(var r in e){var i=e[r].segments;for(var o in i){if(Object.keys(n).length===t)break;var s=i[o];"plaintext"!==s.type&&(n[s.type+s.value]=s)}}return n})),R(this,"_hasAnyResults",(function(e,t){return!(e&&e.results&&e.results.length||t&&t.results&&t.results.length)})),R(this,"_convertSearchResponseToListElements",(function(e){var t=L(e,2),n=t[0],r=t[1];if(i._hasAnyResults(n,r))return[I.noResultsListElement(i.params.options.labels.noResultsMessage)];var o=[];if(r&&r.results){var s=i._findAutocompleteResponseSegments(r.results,2);o.push.apply(o,j(Object.values(s).map((function(e){return I.resultListElement(i.params.evented,e,i.params.options,m)}))))}return n&&o.push.apply(o,j(n.results.map((function(e){return I.resultListElement(i.params.evented,e,i.params.options,v)})))),o})),R(this,"appendResults",(function(e){var t=L(e,2),n=t[0],r=t[1];i.clearResults();var o=i._convertSearchResponseToListElements([n,r]);i._resultsCount=o.length,o.forEach((function(e){i._resultListElements.push(e),i._container.appendChild(e.getContainer())}),i),i._container.style.height="auto"})),R(this,"clearResults",(function(){for(;i._container.firstChild;)i._container.removeChild(i._container.firstChild),i._container.style.height="0px";i._resultsCount=-1,i._resultListElements=[],i._highlightedIdx=-1})),R(this,"_highlightElement",(function(e){i._updateHighlightedElementStyle("remove"),i._updateHighlightedIndex(e),i._updateHighlightedElementStyle("add");var t=i._resultListElements[i._highlightedIdx];t&&t.focus&&t.focus()})),R(this,"_selectElement",(function(e){if(i._highlightedIdx>-1){var t=i._resultListElements[i._highlightedIdx];t&&t.select(e)}else e.preventDefault()})),R(this,"updateOptions",(function(e){i.params.options=Object.assign({},i.params.options,e)})),R(this,"getHighlightedIndex",(function(){return i._highlightedIdx})),R(this,"_updateHighlightedIndex",(function(e){i._highlightedIdx=e===p?i._highlightedIdx-1<0?-1:i._highlightedIdx-1:i._highlightedIdx+1>=i._resultsCount?0:i._highlightedIdx+1})),R(this,"_updateHighlightedElementStyle",(function(e){var t=i._container.childNodes[i._highlightedIdx];t&&(t.classList[e]("-highlighted"),"add"===e&&function(e,t,n){(!n||n&&!function(e,t){var n=e.scrollTop,r=n+e.clientHeight,i=t.offsetTop,o=i+t.clientHeight;return i>=n&&o<=r}(e,t))&&(e.scrollTop=t.offsetTop-e.offsetTop)}(i._container,t,!0))})),this.params={},this.params.evented=t,this.params.options=r,this._container=document.createElement("div"),this._container.className="tt-search-box-result-list-container -hidden",this._highlightedIdx=-1,this._resultsCount=-1,this._resultListElements=[],n.appendChild(this._container),n.onkeydown=this._onKeyDown},k=n(3),F=n.n(k);function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=function e(t,n,i,o){var s=this,a=o.onInput,u=o.onKeydown,l=o.onKeyup,h=o.onClear,v=o.onClick,m=o.onBlur,g=o.onFilterReset;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),P(this,"updateOptions",(function(e){s.params.options=Object.assign({},s.params.options,e),s._setPlaceholder()})),P(this,"getValue",(function(){return s._input.value})),P(this,"setValue",(function(e){s._input.value=e;var t=s._input.value.length>0||s.isFilterSet();s._closeIcon.classList.toggle("-hidden",!t)})),P(this,"isFilterSet",(function(){return Boolean(s._filterType)})),P(this,"getPreviousData",(function(){return{previousValue:s._previousInput,previousFilterOptions:s._previousFilterOptions}})),P(this,"_create",(function(){s._inputContainer=document.createElement("div"),s._inputContainer.className="tt-search-box-input-container",s._inputContainer.onmousedown=function(e){return e.preventDefault()},s._inputContainer.onclick=s._onContainerClick,s._addSearchIcon(),s._addFilter(),s._addInput(),s._addClearIcon()})),P(this,"_onContainerClick",(function(){document.activeElement!==s._input&&s._input.focus()})),P(this,"_addFilter",(function(){s._filter=document.createElement("div"),s._filter.className="tt-searchbox-filter-label -hidden",s._filterText=document.createElement("div"),s._filterText.className="tt-searchbox-filter-label__text",s._filterRemoveButton=document.createElement("div"),s._filterRemoveButton.className="tt-searchbox-filter-label__close-button",s._filterRemoveButton.innerHTML=w,s._filter.appendChild(s._filterText),s._filter.appendChild(s._filterRemoveButton),s._inputContainer.appendChild(s._filter)})),P(this,"_clearFilter",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&s.params.onFilterReset(s._filterType),s._indicateFilterRemoval(!1),s._filterType=null,s._filter.classList.add("-hidden")})),P(this,"_clearPreviousFilter",(function(){s._previousFilterOptions={filterType:void 0,filterText:void 0}})),P(this,"updateFilter",(function(e){var t=e.text,n=e.type,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];i&&s.params.onFilterReset(s._filterType),s._filterType=n,s._filter.classList.remove("-hidden"),s._filterRemoveButton.onclick=function(){s._clearFilter(),s._clearPreviousFilter(),s._onInput()},s._filterText.innerText=t,r&&(s._previousFilterOptions={filterType:n,filterText:t})})),P(this,"_setPlaceholder",(function(){s._input.setAttribute("placeholder",s.params.options.labels.placeholder)})),P(this,"_addInput",(function(){s._input=document.createElement("input"),s._input.className="tt-search-box-input",s._setPlaceholder(),s._input.oninput=F()(s._onInput,s.params.options.idleTimePress),s._input.onfocus=s.toggleInputFocus.bind(null,!0),s._input.onmousedown=function(e){return e.stopPropagation()},s._input.onkeydown=s._onKeyDown,s._input.onkeyup=s._onKeyUp,s._input.onclick=s._onClick,s._input.onblur=s._onBlur,s._inputContainer.appendChild(s._input)})),P(this,"_onClick",(function(e){s._indicateFilterRemoval(!1),s.params.onClick(e)})),P(this,"_onBlur",(function(e){s.toggleInputFocus.call(null,!1),s.params.onBlur(e)})),P(this,"_indicateFilterRemoval",(function(e){s._filter.classList.toggle("-highlighted",e),s._isDeletionConfirmed=e})),P(this,"_onKeyDown",(function(e){s.params.onKeydown(e);var t=e.keyCode||e.which,n=t===_||t===f,r=t===_;r||s._indicateFilterRemoval(!1),n&&s._onBackspaceOrDelete(r)})),P(this,"_onBackspaceOrDelete",(function(e){var t=0===s._input.selectionStart,n=s._input.selectionEnd-s._input.selectionStart,r=0!==n&&n===s.getValue().length;t&&s.isFilterSet()&&(s._isDeletionConfirmed?(s._clearFilter(),s._clearPreviousFilter(),s._onInput()):!r&&e&&s._indicateFilterRemoval(!0))})),P(this,"_onKeyUp",(function(e){var t=e.keyCode||e.which;if(t!==c&&t!==p&&t!==d){s._previousInput=s.getValue();var n=s._filterText.innerText&&""!==s._filterText.innerText?s._filterText.innerText:void 0;s._previousFilterOptions={filterType:s._filterType,filterText:n}}s.params.onKeyup(e)})),P(this,"_addSearchIcon",(function(){s.params.options.showSearchButton&&(s._searchIcon=document.createElement("div"),s._searchIcon.innerHTML=b,s._inputContainer.appendChild(s._searchIcon))})),P(this,"_addClearIcon",(function(){s._closeIcon=document.createElement("div"),s._closeIcon.className="tt-search-box-close-icon -hidden",s._closeIcon.innerHTML=w,s._inputContainer.appendChild(s._closeIcon),s._closeIcon.onclick=function(){s._clearFilter(),s._clearPreviousFilter(),s._input.value="",s._onInput()}})),P(this,"_clearInputWrapper",(function(){s.params.onClear(),s.params.evented.fire(r),s._closeIcon.classList.add("-hidden"),s._previousInput=void 0,s._previousFilterOptions={filterType:void 0,filterText:void 0}})),P(this,"_onInput",(function(){var e=s._input.value.length>0||s.isFilterSet();s._closeIcon.classList.toggle("-hidden",!e),e&&s.params.onInput(s._input.value),0!==s._input.value.length||s.isFilterSet()||s._clearInputWrapper()})),P(this,"toggleInputFocus",(function(e){s._inputContainer.classList.toggle("-focused",e)})),this.params={},this.params.evented=t,this.params.options=i,this.params.onInput=a,this.params.onKeydown=u,this.params.onKeyup=l,this.params.onClear=h,this.params.onClick=v,this.params.onBlur=m,this.params.onFilterReset=g,this._create(),n.appendChild(this._inputContainer),this._previousInput=void 0,this._previousFilterOptions={filterType:void 0,filterText:void 0}};n(7);function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function B(e,t,n){var r=e[t];r||(r=[],e[t]=r),r.push(n)}function N(e,t,n){var r=e[t];return r&&r.forEach((function(e){e.apply(void 0,W(n))})),r}var H=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventToHandlersMap={},this.onceEventToHandlersMap={}}var t,n,r;return t=e,(n=[{key:"fire",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];N(this.eventToHandlersMap,e,n),N(this.onceEventToHandlersMap,e,n)&&delete this.onceEventToHandlersMap[e]}},{key:"on",value:function(e,t){B(this.eventToHandlersMap,e,t)}},{key:"off",value:function(e){e?(delete this.eventToHandlersMap[e],delete this.onceEventToHandlersMap[e]):(this.eventToHandlersMap={},this.onceEventToHandlersMap={})}},{key:"once",value:function(e,t){B(this.onceEventToHandlersMap,e,t)}}])&&A(t.prototype,n),r&&A(t,r),e}(),V=n(0);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function z(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Z(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,i)}function q(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){Z(o,r,i,s,a,"next",e)}function a(e){Z(o,r,i,s,a,"throw",e)}s(void 0)}))}}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee={placeholder:"",suggestions:{brand:"Suggested brand",category:"Suggested category"},noResultsMessage:"No results found."};function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.labels&&t.labels.placeholder||t.placeholder,r=t.labels&&t.labels.noResultsMessage||t.noResultsMessage,i=X({},t.labels);return n&&(i.placeholder=n),r&&(i.noResultsMessage=r),Object.assign({},e,i,{suggestions:Object.assign({},e.suggestions,i.suggestions)})}var ne=function(e){function t(e,n){var r,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u=function(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?Y(e):t}(this,U(t).call(this)),J(Y(Y(u)),"getOptions",(function(){return u.options})),J(Y(Y(u)),"getSearchBoxHTML",(function(){return u._container})),J(Y(Y(u)),"onAdd",(function(e){return u.options.cssStyleCheck&&Object(V.a)(["SearchBox.css"]),u._map=e,u._container.classList.add("mapboxgl-ctrl","tt-ctrl"),u._container})),J(Y(Y(u)),"onRemove",(function(){u._container.parentNode.removeChild(u._container),u._map=void 0})),J(Y(Y(u)),"query",(function(){var e=u.options.searchOptions&&u.options.searchOptions.typeahead||!1;u._query({triggeredBySubmit:!0,useTypeahead:e})})),J(Y(Y(u)),"_query",q(regeneratorRuntime.mark((function e(){var t,n,r,o,s,a,c,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.length>0&&void 0!==p[0]?p[0]:{triggeredBySubmit:!1,useTypeahead:!0},(n=u._inputWrapper.getValue().trim())||u._inputWrapper.isFilterSet()){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,u._runSearch(t.useTypeahead);case 6:r=e.sent,o=r.results,s=r.errors,a=o.autocomplete,c=o.fuzzySearch,u.options.filterSearchResults&&c&&c.results&&(c.results=c.results.filter(u.options.filterSearchResults)),n===u._inputWrapper.getValue().trim()&&u._resultList.appendResults([c,a]),u.fire(i,l(null,X({metadata:{triggeredBy:t.triggeredBySubmit?"submit":"input"}},Object.keys(o).length>0&&{results:o},{},Object.keys(s).length>0&&{errors:s})));case 13:case"end":return e.stop()}}),e)})))),J(Y(Y(u)),"updateOptions",(function(e){var t=u.options.labels;u.options=X({},u.options,{},e),u.options.labels=te(t,e),u._resultList.updateOptions(u.options),u._inputWrapper.updateOptions(u.options)})),J(Y(Y(u)),"setValue",(function(e){u._inputWrapper.setValue(e),u._inputWrapper.previousValue=e})),J(Y(Y(u)),"getValue",(function(){return u._inputWrapper.getValue()})),J(Y(Y(u)),"setFilter",(function(e){var t=e.type,n=e.value;if(!t||!n)throw new Error("Invalid filterOptions format passed. Expected object properties are[type] and [value]");u.removeFilter();var r=u._availableFilters[t](n),i=r.displayedInputValue,o=z(r,["displayedInputValue"]);u._inputWrapper.updateFilter({text:i,type:t},!0);var s=X({},u.options,{searchOptions:X({},u.options.searchOptions,{},o)});u.updateOptions(s),u._inputWrapper._closeIcon.classList.remove("-hidden")})),J(Y(Y(u)),"_availableFilters",(J(r={},y,(function(e){return{categorySet:e.id,displayedInputValue:e.name}})),J(r,g,(function(e){return{brandSet:e.name,displayedInputValue:e.name}})),r)),J(Y(Y(u)),"removeFilter",(function(){u.options.searchOptions&&(u.options.searchOptions.brandSet&&delete u.options.searchOptions.brandSet,u.options.searchOptions.categorySet&&delete u.options.searchOptions.categorySet),u._inputWrapper._clearFilter()})),J(Y(Y(u)),"_createSearchBoxContainer",(function(){return u._container=document.createElement("div"),u._container.className="tt-search-box",u._addInputWrapper(),u._addResultList(),u._container})),J(Y(Y(u)),"_onInputClear",(function(){u._resultList.clearResults()})),J(Y(Y(u)),"_handleInputClick",(function(){u._resultList.setVisibility(!0)})),J(Y(Y(u)),"_handleInputBlur",(function(){u._resultList.setVisibility(!1)})),J(Y(Y(u)),"_handleKeydown",function(){var e=q(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.keyCode||t.which)!==p&&n!==c||t.preventDefault(),n!==h||-1!==u._resultList.getHighlightedIndex()||!u.options.searchOptions){e.next=9;break}return t.preventDefault(),e.next=6,u._query({useTypeahead:!1,triggeredBySubmit:!0});case 6:return u._resultList.clearResults(),u._resultList.setVisibility(!1),e.abrupt("return");case 9:if(n!==d){e.next=13;break}return t.preventDefault(),u._resultList.setVisibility(!1),e.abrupt("return");case 13:u._resultList.setVisibility(!0);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J(Y(Y(u)),"_handleKeyup",(function(e){var t=e.keyCode||e.which;t!==c&&t!==p||-1===u._resultList.getHighlightedIndex()&&u._restoreOriginalQuery()})),J(Y(Y(u)),"_restoreOriginalQuery",(function(){var e=u._inputWrapper.getPreviousData(),t=e.previousValue,n=e.previousFilterOptions;if(n.filterType){u._inputWrapper.updateFilter({type:n.filterType,text:n.filterText},!1,!1)}else u.removeFilter();t&&u._inputWrapper.setValue(t),u.fire(a)})),J(Y(Y(u)),"_addResultList",(function(){u._resultList=new E(Y(Y(u)),u._container,u.options)})),J(Y(Y(u)),"_addInputWrapper",(function(){u._inputWrapper=new M(Y(Y(u)),u._container,u.options,{onInput:u._onInputChange,onKeydown:u._handleKeydown,onKeyup:u._handleKeyup,onClear:u._onInputClear,onClick:u._handleInputClick,onBlur:u._handleInputBlur,onFilterReset:u._onFilterReset})})),J(Y(Y(u)),"_onResultSelected",function(){var e=q(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u._onResultFocused(t),u._updateSelectedResultFilter(t),u._resultList.clearResults(),u._inputWrapper.toggleInputFocus(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J(Y(Y(u)),"_onResultFocused",function(){var e=q(regeneratorRuntime.mark((function e(t){var n,r,i,o,s,a,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"matches"in t.data.result?(n=t.data.result.matches.inputQuery[0],r=n.offset,i=n.length,o=u._inputWrapper.isFilterSet()||!u._isInputFilledWithSelectedResult,s=o?u._inputWrapper.getValue():"",a=s.split(s.slice(r,r+i)).join("").trim(),u._inputWrapper.setValue(a),l=t.data.result.type,u._inputWrapper.updateFilter({text:t.data.text,type:l}),u._isInputFilledWithSelectedResult=!1):(u._inputWrapper.setValue(t.data.text),u._inputWrapper._clearFilter(!1),u._isInputFilledWithSelectedResult=!0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J(Y(Y(u)),"_onFilterReset",(function(){var e=X({},u.options.searchOptions);delete e.categorySet,delete e.brandSet,u.options=Object.assign({},u.options,{searchOptions:e})})),J(Y(Y(u)),"_onInputChange",(function(e){u.options.minNumberOfCharacters>e.length||(u._query(),u._isInputFilledWithSelectedResult=!1)})),J(Y(Y(u)),"_runSearch",(function(e){var t=u._inputWrapper.getValue().trim(),n={};if(u.options.searchOptions){var r=X({query:t,typeahead:u._inputWrapper.isFilterSet()||e},u._map&&{center:u._map.getCenter()},{},u.options.searchOptions);n.fuzzySearch=u.fuzzySearch(r)}if(u.options.autocompleteOptions&&!u._inputWrapper.isFilterSet()){var i=X({query:t},u._map&&{center:u._map.getCenter()},{},u.options.autocompleteOptions);n.autocomplete=u.autocomplete(i)}return u._transformSearchResponse(n)})),J(Y(Y(u)),"_transformSearchResponse",(function(e){return Promise.all(Object.entries(e).map((function(e){var t=K(e,2),n=t[0];return t[1].go().then((function(e){return{name:n,value:e,resolved:!0}})).catch((function(e){return{name:n,value:e,rejected:!0}}))}))).then((function(e){return{results:e.filter((function(e){return e.resolved})).reduce((function(e,t){return X({},e,J({},t.name,t.value))}),{}),errors:e.filter((function(e){return e.rejected})).reduce((function(e,t){return X({},e,J({},t.name,t.value))}),{})}}))})),u.fuzzySearch=e.fuzzySearch,u.autocomplete=e.autocomplete,u.options=Object.assign({},{idleTimePress:200,minNumberOfCharacters:3,searchOptions:null,autocompleteOptions:null,showSearchButton:!0,cssStyleCheck:!0},n),u.options.labels=te(ee,n),u._createSearchBoxContainer(),u.on(o,u._onResultSelected.bind(Y(Y(u)))),u.on(s,u._onResultFocused.bind(Y(Y(u)))),u}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,e),n=t,(r=[{key:"_updateSelectedResultFilter",value:function(e){var t;if("matches"in e.data.result){var n=e.data.result.type;n===y&&(t={categorySet:e.data.result.id}),n===g&&(t={brandSet:e.data.result.value})}this.options=Object.assign({},this.options,{searchOptions:Object.assign({},this.options.searchOptions,t)})}}])&&$(n.prototype,r),u&&$(n,u),t}(H);window.tt=window.tt||{},window.tt.plugins=window.tt.plugins||{},window.tt.plugins.SearchBox=ne}]);